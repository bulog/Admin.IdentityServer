$(function(){function s(){return{userName:$.trim($("#userName").val()),password:$.trim($("#password").val()),rememberLogin:!!$("#rememberLogin:checked").val(),returnUrl:$("#returnUrl").val(),__RequestVerificationToken:$("input[name='__RequestVerificationToken']:first").val()}}function r(n){n&&($(".my-alert:first").show().text(n),i&&clearTimeout(i),i=window.setTimeout(function(){$(".my-alert:first").hide().text("")},3e3))}function f(){var u=$("#userName"),i,f;return $.trim(u.val())===""?(u.focus(),$("#lblUserName").show(),!1):(i=$("#password"),$.trim(i.val())==="")?(i.focus(),$("#lblPassword").show(),!1):t!="popup"&&(f=n?n.getData():null,f==null)?(r("请向右拖动滑块填充拼图！"),!1):!0}function e(){var u=f(),t,i;if(!u)return!1;t=$("#btnLogin");t.prop("disabled",!0).addClass("is-disabled").text("登录中...");i=s();i.captcha=n.getData();$.ajax({type:"post",url:"/user/login",data:i,cache:!1,success:function(i){var f,u;if(!i){t.prop("disabled",!1).removeClass("is-disabled").text("重新登录");return}i.code===1?(f=$.trim($("#returnUrl").val()),f&&(window.location.href=f)):(n&&n.refresh(),t.prop("disabled",!1).removeClass("is-disabled").text("重新登录"),u=i.msg,i.data===1?(u="您的账号输入不正确，请重新输入",$("#userName").focus()):i.data===2&&(u="您的密码输入不正确，请重新输入",$("#password").focus()),r(u))},fail:function(){t.prop("disabled",!1).removeClass("is-disabled").text("重新登录");r("服务器异常")}})}var t="popup",i=null,u,n,o;$("#userName").blur(function(){$.trim($(this).val())===""?$("#lblUserName").show():$("#lblUserName").hide()});$("#password").blur(function(){$.trim($(this).val())===""?$("#lblPassword").show():$("#lblPassword").hide()});u=$(".form-group:first").width()+"px";n=$("#content").slideVerify({baseUrl:"http://localhost:8000",containerId:"#btnLogin",mode:t,imgSize:{width:u,height:"155px"},barSize:{width:u,height:"40px"},beforeCheck:function(){var n=f();return n?n:!1},ready:function(){},success:function(){t=="popup"&&e()},error:function(){}});$("#btnLogin").click(function(){return t!="popup"&&e(),!1});o={plat:{userName:"user",password:"111111"},tenant:{userName:"18988889999",password:"111111"}};$(".my-radio-group .my-radio-button__inner").click(function(){$(".my-radio-group .my-radio-button__inner.active").removeClass("active");$(this).addClass("active");var t=$(this).data("value"),n=o[t];n&&($("#userName").val(n.userName),$("#password").val(n.password))})});